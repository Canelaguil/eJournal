<!--
    Card used in format editor to open template editor, toggle availability, delete templates from pool.
-->

<template>
    <b-card :class="$root.getBorderClass($route.params.cID)">
        <div class="multi-form">
            <icon name="edit" class="edit-template-icon"/>
            <h2 class="field-heading">{{ template.t.name }}</h2>
        </div>
        <div class="d-flex">
            <b-button v-on:click.stop @click="emitDeleteTemplate" class="delete-button flex-grow-1">
                <icon name="trash"/>
                Delete
            </b-button>
            <b-button v-on:click.stop v-if="!template.available" @click="toggleActive" class="delete-button flex-grow-1">
                <icon name="times"/>
                Disabled
            </b-button>
            <b-button v-on:click.stop v-if="template.available" @click="toggleActive" class="add-button flex-grow-1">
                <icon name="check"/>
                Enabled
            </b-button><br>
        </div>
    </b-card>
</template>

<script>
import icon from 'vue-awesome/components/Icon'

export default {
    props: ['template'],
    data () {
        return {
            isActive: this.template.available
        }
    },
    methods: {
        emitDeleteTemplate () {
            if (confirm('Are you sure you want to delete template "' + this.template.t.name + '" from this format?')) {
                this.$emit('delete-template', this.template)
            }
        },
        toggleActive () {
            this.template.available = !this.template.available
        }
    },
    components: {
        icon
    }
}
</script>

<style lang="sass">
.edit-template-icon
    float: right
    position: relative
    top: 2px
</style>
